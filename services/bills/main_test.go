package bills

import (
	"fmt"
	"github.com/barnybug/gohome/config"
	"github.com/barnybug/gohome/lib/graphite"
	"github.com/barnybug/gohome/services"
)

func ExampleElectricityBill() {
	services.Config = config.ExampleConfig
	response := `
[{"target": "summarize(sensor.power.power.avg, \"1h\", \"avg\")", "datapoints": [[460.31057721780934, 1395532800], [242.53540966421014, 1395536400], [230.67326459698427, 1395540000], [229.96581889178577, 1395543600], [236.76539187442566, 1395547200], [212.85531082901772, 1395550800], [230.39363540870895, 1395554400], [223.6254855703367, 1395558000], [244.6987683285525, 1395561600], [498.17290391370346, 1395565200], [346.7536057012896, 1395568800], [448.93548790015006, 1395572400], [555.3674506795805, 1395576000], [531.7983304399593, 1395579600], [502.84386226534207, 1395583200], [483.87423523451196, 1395586800], [539.1608843360095, 1395590400], [749.1371927482027, 1395594000], [355.78834321352406, 1395597600], [238.276146962663, 1395601200], [489.6923475829726, 1395604800], [480.4254754456527, 1395608400], [471.26882631734884, 1395612000], [319.11569861538294, 1395615600], [228.21830985915494, 1395619200]]}]`
	gr = &graphite.MockGraphite{Response: response}
	s := electricityBill()
	fmt.Println(s)
	// Output:
	// Electricity: yesterday I used 9.32 kwh, costing Â£0.97. Peak was around 5:00PM.
}
